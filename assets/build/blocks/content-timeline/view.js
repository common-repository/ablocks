(()=>{"use strict";class e{constructor(e,t=!1){this.contentTimeline=e,this.timelineElement=e.querySelector(".ablocks-block-content-timeline"),this.blockTopHeight=this.contentTimeline.getBoundingClientRect().top+window.scrollY,this.editor=t,this.arrowAlignment=this.timelineElement.getAttribute("data-arrow-alignment"),this.animationColor=this.timelineElement.getAttribute("data-animation-color"),this.showAnimation=this.timelineElement.getAttribute("data-show-animation"),this.lineElement=this.contentTimeline.querySelector(".ablocks-block-content-timeline__line"),this.lineInnerElement=this.contentTimeline.querySelector(".ablocks-block-content-timeline__line__inner"),this.childBlocks=Array.from(this.contentTimeline.querySelectorAll(".ablocks-block-content-timeline-child")),this.handleScroll=this.handleScroll.bind(this),this.updateTimeline=this.updateTimeline.bind(this);const i=document.querySelector(".interface-navigable-region.interface-interface-skeleton__content");this.editorDiv=i,this.init()}init(){this.updateTimeline(),this.handleScroll(),window.addEventListener("scroll",this.handleScroll)}updateTimeline(){if(0===this.childBlocks.length||!this.lineElement)return;const[e,t]=[this.childBlocks[0],this.childBlocks[this.childBlocks.length-1]],[i,n]=[e.getBoundingClientRect().height,t.getBoundingClientRect().height];switch(this.arrowAlignment){case"center":this.lineElement.style.top=i/2+"px",this.lineElement.style.bottom=n/2+"px";break;case"bottom":this.lineElement.style.top=`${i}px`,this.lineElement.style.bottom=n/n+"px";break;case"top":this.lineElement.style.top=i/i+"px",this.lineElement.style.bottom=`${n}px`}this.lineInnerElement.style.height="0px"}handleScroll(){var e;e=()=>{let e=0;const t=window.scrollY;this.childBlocks.forEach((i=>{e+=i.getBoundingClientRect().height;const n=i.querySelector(".ablocks-icon-wrap");t-this.blockTopHeight>e-i.getBoundingClientRect().height?"true"===this.showAnimation&&!1===this.editor&&(n.style.backgroundColor=this.animationColor):n.style.backgroundColor=""})),this.lineInnerElement&&("true"===this.showAnimation&&(this.lineInnerElement.style.backgroundColor=this.animationColor),this.editor||(this.lineInnerElement.style.height=t-this.blockTopHeight+"px"))},"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,16)}destroy(){window.removeEventListener("scroll",this.handleScroll)}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".ablocks-block--content-timeline").forEach((t=>{new e(t,!1)}))}))})();